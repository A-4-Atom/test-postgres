trigger:
  branches:
    include:
      - main

variables:
  imageName: test-postgres
  dockerHubUsername: vikas2626

pool:
  vmImage: ubuntu-latest

steps:
- task: Docker@2
  displayName: Build and Push Docker Image
  inputs:
    command: buildAndPush
    repository: $(dockerHubUsername)/$(imageName)
    dockerfile: Dockerfile
    containerRegistry: dockerhub-connection
    tags: |
      latest
      $(Build.BuildId)
